<!DOCTYPE html>
<html>
	<head>
		<title>07</title>

		<script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>	
   	<script src="../build/react.js"></script>
   	<script src="../build/JSXTransformer.js"></script>

		<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.4/superhero/bootstrap.min.css" rel="stylesheet">

		<style>
			body { padding:30px;}
			label {margin-left:10px;}
			.city {border:10px solid #2b3e50; background:#666;}
		</style>

	</head>
	<body>

		<script type="text/jsx">



			
			var App = React.createClass({
				render: function() {
					return (
						<WeatherBox/>
					);
				}
			});


			var WeatherBox = React.createClass({
				render: function() {
					return (
						<div>
							<City cid="2643743" />
							<City cid="2636432" />
							<City cid="3165524" />
							<City cid="5344157" />
						</div>
					);
				}
			});

			var City = React.createClass({
				getInitialState : function() {
					return {
						name : 'name',
						temp : 14,
						description : 'description'	,
						icon : 'http://placehold.it/20x20',
						visibility : 'hidden'					
					}
				},
				componentDidMount: function() {
					$.get('http://api.openweathermap.org/data/2.5/weather?id=' + this.props.cid + '&units=metric', function(result) {
						this.setState({
							name : result.name,
							temp : result.main.temp,
							description : result.weather[0].description,
							icon : 'http://openweathermap.org/img/w/' + result.weather[0].icon + '.png',
							visibility : ''
						});
					}.bind(this));
				},
				render: function() {
					return (
						<div className={this.state.visibility}>
							<div className="col-xs-6 city">
								<h4>
									{this.state.name} <img src={this.state.icon} alt='' />
								</h4>
								<h6>{this.state.temp}</h6>
								<h4>{this.state.description}</h4>
							</div>
						</div>
					);
				}
			});





			React.render(<App />, document.body)
			

		</script>

	</body>

</html>